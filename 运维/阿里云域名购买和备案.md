## 1ã€é˜¿é‡Œäº‘è´­ä¹°åŸŸå
- è´­ä¹°åŸŸååœ°å€ï¼šhttps://wanwang.aliyun.com/domain/ ä¾¿å®œçš„åŸŸåä¸€å¹´åå‡ å—é’±éƒ½æœ‰
- è´­ä¹°å®Œä¹‹åè¿›å…¥åŸŸåæ§åˆ¶å°=ã€‹åŸŸååˆ—è¡¨å°±å¯ä»¥çœ‹åˆ°åˆšè´­ä¹°çš„(åˆšè´­ä¹°çš„åŸŸåçŠ¶æ€ä¸€èˆ¬ä¸ºå¾…å®¡æ ¸ï¼Œè¿™ä¸ªå®¡æ ¸æ—¶é—´ä¸€èˆ¬å‡ åˆ†é’Ÿå°±å¯ä»¥äº†)
- åŸŸåéœ€è¦å’Œå¯¹åº”çš„ipå…³è”ç³»æ¥ï¼Œè¿™æ ·å°±èƒ½é€šè¿‡åŸŸåæ–¹ä½å¯¹åº”ipäº†ï¼Œå…³è”æ–¹å¼æ˜¯å¦‚ä¸‹å¦‚å›¾æ‰€ç¤ºçš„åŸŸååˆ—è¡¨ä¸­çš„è§£æ
![åŸŸååˆ—è¡¨](https://cdn.nlark.com/yuque/0/2025/png/2488285/1756889977701-837235c9-2cde-41c2-9b33-0b4611731957.png?x-oss-process=image%2Fformat%2Cwebp)
åŸŸåè§£æ
![åŸŸåè§£æ](https://cdn.nlark.com/yuque/0/2025/png/2488285/1756890149889-dee9b1d2-739c-44ab-9d4c-72029f098acb.png?x-oss-process=image%2Fformat%2Cwebp)
![é˜¿é‡Œäº‘åŸŸåæ–‡æ¡£](https://help.aliyun.com/zh/dws/?spm=a2c4g.11186623.0.0.c829159e406Loh)

## 2ã€åŸŸåå¤‡æ¡ˆ
### 2.1ã€ä¸ªäººå¤‡æ¡ˆ
æ³¨æ„ç‚¹ï¼š
- éœ€è¦å¡«å†™ä¸ªäººçœŸå®ä¿¡æ¯
- å¤‡æ¡ˆçš„äº‘äº§å“å®ä¾‹éœ€è¦ç»­è´¹3ä¸ªæœˆæˆ–è€…ä»¥ä¸Šï¼Œå¦åˆ™ä¸èƒ½å¤‡æ¡ˆ
- æ³¨æ„ç¬¬å››æ­¥ï¼šéœ€è¦ä¸Šä¼ å’Œäº’è”ç½‘å¤‡æ¡ˆä¿¡æ¯çœŸå®æ€§æ‰¿è¯ºä¹¦(æ‰“å°æ¨¡æ¿å‡ºæ¥ï¼Œç­¾åã€å†™æ—¥æœŸã€æŒ‰æ‰‹å°åä¸Šä¼ æ–‡ä»¶ç…§ç‰‡)
![å¤‡æ¡ˆæµç¨‹](https://cdn.nlark.com/yuque/0/2025/png/2488285/1758110267104-653c5ad1-d101-44fd-81e3-8c52d72a7a5b.png?x-oss-process=image%2Fformat%2Cwebp)

## 3.åŸŸåå¤‡æ¡ˆå®¡æ ¸
[å·¥ä¸šå’Œä¿¡æ¯åŒ–éƒ¨æ”¿åŠ¡æœåŠ¡å¹³å°](https://beian.miit.gov.cn/#/Integrated/index)ï¼šhttps://beian.miit.gov.cn/#/Integrated/index
### 3.1 ç§ŸèµæœåŠ¡å™¨åˆå®¡
è¿™ä¸ªæ—¶é—´å¾ˆå¿«ä¸€èˆ¬ä¸€å¤©å°±å¯ä»¥
### 3.2 å·¥ä¿¡éƒ¨ç»ˆå®¡
è¿™ä¸ªæ—¶é—´æ¯”è¾ƒæ…¢ï¼Œä¸€èˆ¬éœ€è¦ä¸€å‘¨

[åœ¨å·¥ä¿¡éƒ¨æŸ¥çœ‹é€šè¿‡å®¡æ ¸çš„åŸŸå](https://beian.miit.gov.cn/)

## 4. SSLè¯ä¹¦ç”³è¯·
### 4.1 é˜¿é‡Œäº‘ç”³è¯·SSLè¯ä¹¦
é˜¿é‡Œäº‘æœåŠ¡å™¨çš„è¯ç›´æ¥æ‰¾åˆ°å…¥å£ç»‘å®šéœ€è¦ç”³è¯·SSLè¯ä¹¦çš„åŸŸåæäº¤å³å¯ï¼Œåé¢å°±æ˜¯ç­‰å¾…å¹³å°çš„ç­¾å‘ï¼Œä¸€èˆ¬ä¸º åŠä¸ªé’Ÿå·¦å³

### 4.2 ç”³è¯·é€šè¿‡åçš„é˜¿é‡Œäº‘è¯ä¹¦æŸ¥çœ‹å’Œä¸‹è½½
![æŸ¥çœ‹é˜¿é‡Œäº‘è¯ä¹¦](https://cdn.nlark.com/yuque/0/2025/png/2488285/1758990366107-d37dafe8-6e46-4a7c-a49c-925af87a66b6.png?x-oss-process=image%2Fformat%2Cwebp)

### 4.3 æ·˜å®é¢æ¿é…ç½®é˜¿é‡Œäº‘è¯ä¹¦
å°†ä¸Šé¢ä¸€æ­¥ä¸‹è½½çš„å¯†é’¥å’Œè¯ä¹¦é…ç½®åˆ°æ·˜å®é¢æ¿å¯¹åº”çš„ç½‘é¡µä¸­ï¼Œå¦‚ä¸‹å¦‚æ‰€ç¤º
![æ·˜å®é¢æ¿éƒ¨ç½²SSLè¯ä¹¦](https://cdn.nlark.com/yuque/0/2025/png/2488285/1758991053275-3f186599-c7fd-493a-89ea-655f2ba58e7f.png?x-oss-process=image%2Fformat%2Cwebp)


## 5. OSSå¯¹è±¡äº‘å­˜å‚¨
### 5.1 å¯¹è±¡å­˜å‚¨OSSç®¡ç†é¡µé¢
åœ°å€(https://oss.console.aliyun.com/overview)

é˜¿é‡Œäº‘é…ç½®ooséœ€è¦é…ç½®äº”é¡¹å¦‚ä¸‹æ‰€ç¤ºï¼š
```bash
ALIYUN_ACCESS_KEY_ID="your ALIYUN_ACCESS_KEY_ID" ## è®¿é—®ç§˜é’¥ID
ALIYUN_ACCESS_KEY_SECRET="your ALIYUN_ACCESS_KEY_SECRET" ## è®¿é—®ç§˜é’¥Secret
ALIYUN_OSS_BUCKET="education-bucket-learn"  ## å­˜å‚¨ç©ºé—´åç§°
ALIYUN_OSS_REGION="oss-cn-shenzhen"  ## åœ°åŸŸèŠ‚ç‚¹,å¦‚ï¼šoss-cn-shanghaiï¼ˆåä¸œ2ä¸Šæµ·ï¼‰
```

ğŸ“‹ å››ä¸ªé…ç½®é¡¹è¯´æ˜
1ï¸âƒ£ ALIYUN_ACCESS_KEY_IDï¼ˆè®¿é—®å¯†é’¥IDï¼‰
å«ä¹‰ï¼šä½ çš„é˜¿é‡Œäº‘è´¦å·èº«ä»½æ ‡è¯†
æ ¼å¼ï¼š24ä½å­—ç¬¦ä¸²ï¼Œå¦‚ LTAI5tAbCdEfGhIjKlMn
è·å–ä½ç½®ï¼šæ§åˆ¶å°å³ä¸Šè§’ â†’ å¤´åƒ â†’ "AccessKey ç®¡ç†"
2ï¸âƒ£ ALIYUN_ACCESS_KEY_SECRETï¼ˆè®¿é—®å¯†é’¥Secretï¼‰
å«ä¹‰ï¼šä¸IDé…å¯¹çš„å¯†é’¥ï¼Œç”¨äºéªŒè¯è¯·æ±‚
æ ¼å¼ï¼š30ä½å­—ç¬¦ä¸²
âš ï¸ é‡è¦ï¼šåªæ˜¾ç¤ºä¸€æ¬¡ï¼Œåˆ›å»ºååŠ¡å¿…ä¿å­˜ï¼
3ï¸âƒ£ ALIYUN_OSS_BUCKETï¼ˆå­˜å‚¨ç©ºé—´åç§°ï¼‰
å«ä¹‰ï¼šæ–‡ä»¶å­˜å‚¨çš„å®¹å™¨åç§°
æ ¼å¼ï¼šè‡ªå®šä¹‰ï¼Œå¦‚ my-education-files
è·å–ä½ç½®ï¼šOSSæ§åˆ¶å° â†’ "åˆ›å»º Bucket" â†’ è‡ªå·±å‘½å
4ï¸âƒ£ ALIYUN_OSS_REGIONï¼ˆåœ°åŸŸèŠ‚ç‚¹ï¼‰
å«ä¹‰ï¼šå­˜å‚¨ç©ºé—´æ‰€åœ¨çš„åœ°ç†ä½ç½®
æ ¼å¼ï¼šå¦‚ oss-cn-shanghaiï¼ˆåä¸œ2ä¸Šæµ·ï¼‰
è·å–ä½ç½®ï¼šBucket åˆ—è¡¨ â†’ æ‰¾åˆ°ä½ çš„ Bucket â†’ æŸ¥çœ‹"å¤–ç½‘è®¿é—® Endpoint"
         ä¾‹å¦‚ï¼šoss-cn-shanghai.aliyuncs.com,Region å°±æ˜¯ï¼šoss-cn-shanghai

æœåŠ¡ç«¯é…ç½®é˜¿é‡Œäº‘ä¸Šä¼ ï¼š

### 5.2 é˜¿é‡Œäº‘ OSS ä¸Šä¼ å›¾ç‰‡å’Œè§†é¢‘æ­¥éª¤

#### ä¸€ã€å‡†å¤‡å·¥ä½œ

**1. åˆ›å»º Bucketï¼ˆå­˜å‚¨ç©ºé—´ï¼‰**
- ç™»å½• OSS æ§åˆ¶å°ï¼šhttps://oss.console.aliyun.com/
- ç‚¹å‡»"åˆ›å»º Bucket"
- å¡«å†™ Bucket åç§°ï¼ˆå¦‚ï¼š`my-app-uploads`ï¼‰
- é€‰æ‹©åœ°åŸŸï¼ˆå¦‚ï¼šåä¸œ1-æ­å·ï¼‰
- è¯»å†™æƒé™ï¼šé€‰æ‹©"å…¬å…±è¯»"ï¼ˆå›¾ç‰‡è§†é¢‘éœ€è¦å¤–ç½‘è®¿é—®ï¼‰æˆ–"ç§æœ‰"ï¼ˆéœ€è¦ç­¾åè®¿é—®ï¼‰
- ç‚¹å‡»"ç¡®å®š"

**2. åˆ›å»º RAM å­è´¦å·ï¼ˆå®‰å…¨èµ·è§ï¼‰**
- è¿›å…¥ RAM æ§åˆ¶å°ï¼šhttps://ram.console.aliyun.com/
- å·¦ä¾§èœå• â†’ èº«ä»½ç®¡ç† â†’ ç”¨æˆ· â†’ åˆ›å»ºç”¨æˆ·
- å‹¾é€‰"OpenAPI è°ƒç”¨è®¿é—®"
- ä¿å­˜ AccessKey ID å’Œ AccessKey Secretï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼ï¼‰
- ä¸ºç”¨æˆ·æˆæƒï¼šæ·»åŠ æƒé™ â†’ é€‰æ‹© `AliyunOSSFullAccess`

**3. é…ç½®è·¨åŸŸï¼ˆCORSï¼‰**ï¼ˆå¦‚æœå‰ç«¯ç›´ä¼ éœ€è¦ï¼‰
- OSS æ§åˆ¶å° â†’ é€‰æ‹© Bucket â†’ æƒé™ç®¡ç† â†’ è·¨åŸŸè®¾ç½®
- æ·»åŠ è§„åˆ™ï¼š
  - æ¥æºï¼š`*` æˆ–æŒ‡å®šåŸŸå
  - å…è®¸ Methodsï¼š`GET, POST, PUT, DELETE, HEAD`
  - å…è®¸ Headersï¼š`*`
  - æš´éœ² Headersï¼š`ETag, x-oss-request-id`

---

#### äºŒã€Node.js åç«¯ä¸Šä¼ ï¼ˆæ¨èï¼‰

**1. å®‰è£… SDK**
```bash
npm install ali-oss
```

**2. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆ.envï¼‰**
```bash
ALIYUN_ACCESS_KEY_ID="LTAI5tFxxxxxxxxxxxxxx"
ALIYUN_ACCESS_KEY_SECRET="3G8Mxxxxxxxxxxxxxxxxxxxxxk"
ALIYUN_OSS_BUCKET="my-app-uploads"
ALIYUN_OSS_REGION="oss-cn-hangzhou"
```

**3. ä¸Šä¼ ä»£ç ç¤ºä¾‹**
```javascript
const OSS = require('ali-oss');
const path = require('path');

// åˆå§‹åŒ– OSS å®¢æˆ·ç«¯
const client = new OSS({
  region: process.env.ALIYUN_OSS_REGION,
  accessKeyId: process.env.ALIYUN_ACCESS_KEY_ID,
  accessKeySecret: process.env.ALIYUN_ACCESS_KEY_SECRET,
  bucket: process.env.ALIYUN_OSS_BUCKET,
});

// ä¸Šä¼ æ–‡ä»¶
async function uploadFile(file) {
  try {
    // ç”Ÿæˆæ–‡ä»¶åï¼ˆé¿å…é‡å¤ï¼‰
    const fileName = `${Date.now()}-${file.originalname}`;
    const filePath = `uploads/${fileName}`; // OSS ä¸­çš„è·¯å¾„
    
    // ä¸Šä¼ åˆ° OSS
    const result = await client.put(filePath, file.buffer);
    
    console.log('ä¸Šä¼ æˆåŠŸ:', result.url);
    return result.url; // è¿”å›è®¿é—®åœ°å€
  } catch (error) {
    console.error('ä¸Šä¼ å¤±è´¥:', error);
    throw error;
  }
}

// ä¸Šä¼ æœ¬åœ°æ–‡ä»¶
async function uploadLocalFile(localFilePath) {
  const fileName = path.basename(localFilePath);
  const result = await client.put(`uploads/${fileName}`, localFilePath);
  return result.url;
}
```

**4. Express è·¯ç”±ç¤ºä¾‹ï¼ˆé…åˆ multerï¼‰**
```javascript
const express = require('express');
const multer = require('multer');
const router = express.Router();

// ä½¿ç”¨å†…å­˜å­˜å‚¨
const upload = multer({ storage: multer.memoryStorage() });

// ä¸Šä¼ æ¥å£
router.post('/upload', upload.single('file'), async (req, res) => {
  try {
    const file = req.file;
    
    // éªŒè¯æ–‡ä»¶ç±»å‹
    const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'video/mp4'];
    if (!allowedTypes.includes(file.mimetype)) {
      return res.status(400).json({ error: 'æ–‡ä»¶ç±»å‹ä¸æ”¯æŒ' });
    }
    
    // ä¸Šä¼ åˆ° OSS
    const url = await uploadFile(file);
    
    res.json({ 
      success: true, 
      url: url,
      message: 'ä¸Šä¼ æˆåŠŸ' 
    });
  } catch (error) {
    res.status(500).json({ error: 'ä¸Šä¼ å¤±è´¥' });
  }
});

module.exports = router;
```

---

#### ä¸‰ã€å‰ç«¯ç›´ä¼ ï¼ˆå¯é€‰ï¼Œé€‚åˆå¤§æ–‡ä»¶ï¼‰

**1. è·å–ç­¾åï¼ˆåç«¯æ¥å£ï¼‰**
```javascript
// ç”Ÿæˆ OSS ç­¾åï¼ˆåç«¯ï¼‰
router.get('/oss/signature', (req, res) => {
  const date = new Date();
  date.setHours(date.getHours() + 1); // ç­¾å1å°æ—¶æœ‰æ•ˆ
  
  const policy = {
    expiration: date.toISOString(),
    conditions: [
      ['content-length-range', 0, 1048576000] // æœ€å¤§1GB
    ]
  };
  
  const signature = client.calculatePostSignature(policy);
  
  res.json({
    accessKeyId: client.options.accessKeyId,
    policy: signature.policy,
    signature: signature.Signature,
    host: `https://${client.options.bucket}.${client.options.region}.aliyuncs.com`,
    expire: date.getTime()
  });
});
```

**2. å‰ç«¯ä¸Šä¼ ä»£ç **
```javascript
// å‰ç«¯ç›´ä¼ ï¼ˆVue/Reactï¼‰
async function uploadToOSS(file) {
  // 1. è·å–ç­¾å
  const { data } = await axios.get('/api/oss/signature');
  
  // 2. æ„å»ºè¡¨å•
  const formData = new FormData();
  const fileName = `uploads/${Date.now()}-${file.name}`;
  
  formData.append('key', fileName);
  formData.append('policy', data.policy);
  formData.append('OSSAccessKeyId', data.accessKeyId);
  formData.append('signature', data.signature);
  formData.append('file', file);
  
  // 3. ä¸Šä¼ åˆ° OSS
  await axios.post(data.host, formData);
  
  // 4. è¿”å›è®¿é—®åœ°å€
  return `${data.host}/${fileName}`;
}
```

---

#### å››ã€å¸¸è§é…ç½®

**1. æ–‡ä»¶å¤§å°é™åˆ¶**
```javascript
const upload = multer({
  storage: multer.memoryStorage(),
  limits: {
    fileSize: 100 * 1024 * 1024, // é™åˆ¶100MB
  }
});
```

**2. æ”¯æŒçš„æ–‡ä»¶ç±»å‹**
```javascript
const ALLOWED_TYPES = {
  image: ['image/jpeg', 'image/png', 'image/gif', 'image/webp'],
  video: ['video/mp4', 'video/avi', 'video/mov', 'video/quicktime'],
};
```

**3. åˆ é™¤æ–‡ä»¶**
```javascript
async function deleteFile(fileName) {
  await client.delete(fileName);
  console.log('åˆ é™¤æˆåŠŸ');
}
```

**4. è·å–æ–‡ä»¶åˆ—è¡¨**
```javascript
async function listFiles() {
  const result = await client.list({
    prefix: 'uploads/', // ç›®å½•å‰ç¼€
    'max-keys': 100     // æœ€å¤šè¿”å›100ä¸ª
  });
  return result.objects;
}
```

---

#### äº”ã€æ³¨æ„äº‹é¡¹

âš ï¸ **å®‰å…¨å»ºè®®**
- âœ… ä½¿ç”¨ RAM å­è´¦å·ï¼Œä¸è¦ç”¨ä¸»è´¦å· AccessKey
- âœ… AccessKey ä¸è¦æäº¤åˆ°ä»£ç ä»“åº“ï¼ˆä½¿ç”¨ .env æ–‡ä»¶ï¼‰
- âœ… éªŒè¯æ–‡ä»¶ç±»å‹å’Œå¤§å°ï¼Œé˜²æ­¢æ¶æ„ä¸Šä¼ 
- âœ… ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ HTTPS

ğŸ’° **è´¹ç”¨ç›¸å…³**
- å­˜å‚¨è´¹ç”¨ï¼šæŒ‰å­˜å‚¨é‡è®¡è´¹ï¼ˆçº¦ 0.12å…ƒ/GB/æœˆï¼‰
- æµé‡è´¹ç”¨ï¼šå¤–ç½‘ä¸‹è½½æµé‡ï¼ˆçº¦ 0.5å…ƒ/GBï¼‰
- è¯·æ±‚è´¹ç”¨ï¼šPUT/GET è¯·æ±‚æ¬¡æ•°ï¼ˆå¾ˆä¾¿å®œï¼‰

ğŸ¯ **æ€§èƒ½ä¼˜åŒ–**
- å›¾ç‰‡å»ºè®®å‹ç¼©åå†ä¸Šä¼ 
- è§†é¢‘å¤§æ–‡ä»¶ä½¿ç”¨åˆ†ç‰‡ä¸Šä¼ 
- ä½¿ç”¨ CDN åŠ é€Ÿè®¿é—®ï¼ˆç»‘å®šè‡ªå®šä¹‰åŸŸåï¼‰

---

#### å…­ã€å¿«é€Ÿæµ‹è¯•

```bash
# å®‰è£…ä¾èµ–
npm install ali-oss

# åˆ›å»ºæµ‹è¯•æ–‡ä»¶ test-upload.js
node test-upload.js
```

```javascript
// test-upload.js
const OSS = require('ali-oss');

const client = new OSS({
  region: 'oss-cn-hangzhou',
  accessKeyId: 'your-access-key-id',
  accessKeySecret: 'your-access-key-secret',
  bucket: 'your-bucket-name',
});

async function test() {
  // ä¸Šä¼ æœ¬åœ°æ–‡ä»¶
  const result = await client.put('test.jpg', './test.jpg');
  console.log('ä¸Šä¼ æˆåŠŸ:', result.url);
}

test();
```

---

#### å‚è€ƒæ–‡æ¡£
- é˜¿é‡Œäº‘ OSS æ–‡æ¡£ï¼šhttps://help.aliyun.com/product/31815.html
- Node.js SDKï¼šhttps://help.aliyun.com/document_detail/32068.html
